# Отрисовка PDF и рекомендательная система

## Описание проекта

Данный проект — это серверная часть онлайн-платформы для управления и поиска любительских спортивных соревнований. Сервер реализован на Python с использованием gRPC и взаимодействует с Java API (бэкенд) и Redis (кэширование). Основные микросервисы: сервис генерации PDF-документов и рекомендательная система.

---

## Архитектура и сервисы

- **PDF-сервис:**
  Генерирует PDF-документы с результатами матчей и турниров по запросу через gRPC. Поддерживает разные виды спорта, формирует отчёты с таблицами и статистикой.

- **Рекомендательный сервис:**
  Формирует персональные рекомендации турниров для пользователей на основе их профиля, истории участия и предпочтений. Кэширует результаты в Redis.

- **Redis:**
  Используется для кэширования рекомендаций и статусов генерации PDF.


---

## gRPC API (основные методы)

- **PDFService**
  - `CreateMatchPDF` — генерация PDF для матча
  - `CreateTournamentPDF` — генерация PDF для турнира
  - `GetPDFStatus` — получение статуса генерации PDF

- **RecommenderService**
  - `GetRecommendations` — получить рекомендации для пользователя
  - `UpdateUserData` — обновить профиль пользователя

---

## Развёртывание и запуск

### Быстрый старт в Docker

1. Соберать и запустить все сервисы:
   docker-compose up --build -d

2. Проверка логов gRPC-сервера:
   docker-compose logs -f grpc-server

3. Остановить сервисы:
   docker-compose down


> Все сервисы будут доступны внутри Docker-сети. gRPC-сервер слушает порт 50051, Redis — 6379.

---

## Тестирование

- Для проверки работы кэша Redis использовать скрипт:

  python src/test_clients/redis_viewer.py

- Для ручного тестирования сервисов использовать:
  - `src/test_clients/test_services.py` — тестирует оба gRPC-сервиса

---

## Кэширование

- Кэш рекомендаций хранится в Redis по ключу `recommendations:<user_id>`.
- Кэш автоматически обновляется при изменении профиля пользователя.

---

## Логирование

- Логирование настраивается через переменную окружения `LOG_LEVEL`.
- Все основные действия и ошибки пишутся в консоль и логи контейнера.

